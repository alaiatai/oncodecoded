{%- comment -%}
Header template with support for dark, light, and default themes.
Includes dynamic background support and navigation links.
{%- endcomment -%}

<header 
  class="header {%- if include.theme == 'dark' -%}header--dark{%- elsif include.theme == 'light' -%}header--light{%- endif -%}" 
  {%- if include.background -%}style="background: {{ include.background }};"{%- endif -%}>
  
  <div class="main">
    <!-- Brand Section -->
    <div class="header__title">
      <div class="header__brand">
        <!-- Logo -->
        {%- include svg/logo.svg -%}

        <!-- Site Title -->
        {%- assign _paths_root = site.paths.root | default: site.data.variables.default.paths.root -%}
        {%- include snippets/get-nav-url.html path=_paths_root -%}
        {%- if site.title -%}
        <a href="{{ __return }}" title="{%- if site.description -%}{{ site.description }}{%- endif -%}">
          {{ site.title }}
        </a>
        {%- endif -%}
      </div>

      <!-- Search Button (Optional) -->
      {%- if site.search.provider -%}
      <button class="button button--secondary button--circle search-button js-search-toggle">
        <i class="fas fa-search"></i>
      </button>
      {%- endif -%}
    </div>

    <!-- Navigation Menu -->
    {%- if site.data.navigation.header -%}
    <nav class="navigation">
      <ul>
        {%- for _item in site.data.navigation.header -%}
        {%- include snippets/get-nav-url.html path=_item.url -%}
        {%- assign _nav_url = __return -%}
        {%- include snippets/get-nav-url.html path=page.url -%}
        {%- assign _page_url = __return -%}
        {%- include snippets/get-string-from-locale-config.html locale=_item.titles -%}

        <!-- Highlight Active Navigation Item -->
        <li class="navigation__item {%- if _nav_url == _page_url or (page.nav_key and _item.key and page.nav_key == _item.key) -%}navigation__item--active{%- endif -%}">
          <a href="{{ _nav_url }}">
            {%- if _item.title -%}{{ _item.title }}{%- else -%}{{ __return }}{%- endif -%}
          </a>
        </li>
        {%- endfor -%}

        <!-- Optional Search Button in Navigation -->
        {%- if site.search.provider -%}
        <li>
          <button class="button button--secondary button--circle search-button js-search-toggle">
            <i class="fas fa-search"></i>
          </button>
        </li>
        {%- endif -%}
      </ul>
    </nav>
    {%- endif -%}
  </div>
</header>
